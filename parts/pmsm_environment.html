

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Permanent Magnet Synchronous Motor Environments &mdash; gym-electric-motor 2019 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> gym-electric-motor
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Gym Electric Motor Readme:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="readme.html">Readme File</a></li>
</ul>
<p class="caption"><span class="caption-text">gym-electric-motor Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="environments/environment.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference_generators/reference_generator.html">Reference Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="reward_functions/reward_function.html">Reward Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="physical_systems/physical_system.html">Physical Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualizations/visualization.html">Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utils</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gym-electric-motor</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Permanent Magnet Synchronous Motor Environments</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/parts/pmsm_environment.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="permanent-magnet-synchronous-motor-environments">
<h1>Permanent Magnet Synchronous Motor Environments<a class="headerlink" href="#permanent-magnet-synchronous-motor-environments" title="Permalink to this headline">¶</a></h1>
<div class="section" id="pmsm-base-environment">
<h2>PMSM Base Environment<a class="headerlink" href="#pmsm-base-environment" title="Permalink to this headline">¶</a></h2>
<p>The PMSM Base Environment is the Base class for the callable PMSMDisc and PMSMCont Environments</p>
<dl class="class">
<dt id="gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmEnv">
<em class="property">class </em><code class="sig-prename descclassname">gym_electric_motor.envs.gym_pmsm.pmsm_env.</code><code class="sig-name descname">PmsmEnv</code><span class="sig-paren">(</span><em class="sig-param">converter_type</em>, <em class="sig-param">zero_refs=()</em>, <em class="sig-param">tau=0.0001</em>, <em class="sig-param">episode_length=100000</em>, <em class="sig-param">load_parameter=None</em>, <em class="sig-param">motor_parameter=None</em>, <em class="sig-param">reward_weight=(('omega'</em>, <em class="sig-param">1.0)</em>, <em class="sig-param">)</em>, <em class="sig-param">on_dashboard=('True'</em>, <em class="sig-param">)</em>, <em class="sig-param">integrator='euler'</em>, <em class="sig-param">nsteps=1</em>, <em class="sig-param">prediction_horizon=0</em>, <em class="sig-param">interlocking_time=0.0</em>, <em class="sig-param">noise_levels=0.0</em>, <em class="sig-param">reward_fct='swsae'</em>, <em class="sig-param">limit_observer='off'</em>, <em class="sig-param">dead_time=True</em>, <em class="sig-param">safety_margin=1.3</em>, <em class="sig-param">gamma=0.9</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/envs/gym_pmsm/pmsm_env.html#PmsmEnv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmEnv" title="Permalink to this definition">¶</a></dt>
<dd><p>Gym Environment for a Permanent Magnet Synchronous Motor (PMSM).</p>
<dl class="simple">
<dt><strong>Description</strong>:</dt><dd><p>This class contains the environment of a PMSM.</p>
</dd>
</dl>
<p><strong>Source:</strong></p>
<dl>
<dt><strong>State Variables</strong>:</dt><dd><table class="docutils align-default">
<colgroup>
<col style="width: 7%" />
<col style="width: 10%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Index</p></th>
<th class="head"><p>State</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>omega</p></td>
<td><p>mechanical angular velocity of the motor in rad/s</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>torque</p></td>
<td><p>generated torque by the motor in Nm</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>i_a</p></td>
<td><p>current flowing into branch a in A</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>i_b</p></td>
<td><p>current flowing into branch b in A</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>i_c</p></td>
<td><p>current flowing into branch c in A</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>u_a</p></td>
<td><p>voltage applied between branch a and ground in V</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>u_b</p></td>
<td><p>voltage applied between branch b and ground in V</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>u_c</p></td>
<td><p>voltage applied between branch c and ground in V</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>epsilon</p></td>
<td><p>mechanical angle of the rotor in rad</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>u_sup</p></td>
<td><p>supply voltage</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p><strong>Observation</strong>:</p>
<blockquote>
<div><p>Type: Box(10 + Number of reference variables * (prediction horizon + 1))</p>
<p>The observation consists of the current normalized values for the state variables in the limit range [0, 1] or
[-1, 1] concatenated with the current and future references of the reference variables that are no zero
references.</p>
<dl>
<dt><em>Example</em>:</dt><dd><p>Reference Variables: omega and i_a with prediction horizon 1</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">omega</span><span class="p">,</span> <span class="n">torque</span><span class="p">,</span> <span class="n">i_a</span><span class="p">,</span> <span class="n">i_b</span><span class="p">,</span> <span class="n">i_c</span><span class="p">,</span> <span class="n">u_a</span><span class="p">,</span> <span class="n">u_b</span><span class="p">,</span> <span class="n">u_c</span><span class="p">,</span> <span class="n">epsilon</span><span class="p">,</span>  <span class="n">u_sup</span><span class="p">,</span>
<span class="n">omega_ref</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">omega_ref</span><span class="p">[</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="n">i_a_ref</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">i_a_ref</span><span class="p">[</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">]]</span>
</pre></div>
</div>
</dd>
</dl>
</div></blockquote>
<p><strong>Actions</strong>:</p>
<blockquote>
<div><p>The actions are the direct switching states of the transistors for the converter for the discrete case.</p>
<p>Type: Discrete(8)</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 24%" />
<col style="width: 30%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Num</p></th>
<th class="head"><p>Switch A</p></th>
<th class="head"><p>Switch B</p></th>
<th class="head"><p>Switch C</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>lower</p></td>
<td><p>lower</p></td>
<td><p>lower</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>lower</p></td>
<td><p>lower</p></td>
<td><p>upper</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>lower</p></td>
<td><p>upper</p></td>
<td><p>lower</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>lower</p></td>
<td><p>upper</p></td>
<td><p>upper</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>upper</p></td>
<td><p>lower</p></td>
<td><p>lower</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>upper</p></td>
<td><p>lower</p></td>
<td><p>upper</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>upper</p></td>
<td><p>upper</p></td>
<td><p>lower</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>upper</p></td>
<td><p>upper</p></td>
<td><p>upper</p></td>
</tr>
</tbody>
</table>
<p>A lower position means 0V and upper position means +u_dc.</p>
<p>In the continuous environment the actions are the modulated switching states.
Type: Box(3)</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Num</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Duty Cycle for Switch A [-1, 1]</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Duty Cycle for Switch B [-1, 1]</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Duty Cycle for Switch C [-1, 1]</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="simple">
<dt><strong>Reward:</strong></dt><dd><p>The reward is selectable between several reward functions. See below for further information.</p>
</dd>
<dt><strong>Starting State:</strong></dt><dd><p>The angular velocity is initialized randomly between [-1, 1]
The Amplitude of the current vector is initialized randomly between [-1, 1]
The Phase of the current vector is initialized randomly between [0, 2 * pi]
By this the currents i_a, i_b, i_c are calculated.
All other states are initialized with zero.</p>
</dd>
<dt><strong>Episode Termination:</strong></dt><dd><p>An episode terminates when episode_length steps have been taken.
Furthermore, an episode might end, if limits of the motor are violated.
This behaviour can be selected with the limit_observer.</p>
</dd>
</dl>
<p>Basic setting of all the common motor parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>converter_type</strong> – Selection of discrete or continuous converter. Either ‘Disc’ or ‘Cont’</p></li>
<li><p><strong>zero_refs</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – Selection of reference variables that should get zero references
to keep their value low.</p></li>
<li><p><strong>tau</strong> – sampling time</p></li>
<li><p><strong>episode_length</strong> – The episode length of the environment</p></li>
<li><p><strong>load_parameter</strong> – A dict of Load parameters that differ from the default ones.                            For details look into the load model.</p></li>
<li><p><strong>motor_parameter</strong> – A dict of motor parameters that differ from the default ones.                             For details look into the dc_motor model.</p></li>
<li><p><strong>reward_weight</strong> – <p>Iterable of key/value pairs that specifies how the rewards in the environment
are weighted.
E.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">((</span><span class="s1">&#39;omega&#39;</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),(</span><span class="s1">&#39;u_a&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">))</span>
</pre></div>
</div>
</p></li>
<li><p><strong>on_dashboard</strong> (<em>list</em><em>(</em><em>str</em><em>) </em><em>with entries that are names of state variables</em>) – Set the dashboard variables that shall be displayed.
If on_dashboard is [‘True’] then all variables will be displayed
If on_dashboard is [‘False’] then no variables will be displayed</p></li>
<li><p><strong>integrator</strong> – Select integration method between ‘dopri5’ and ‘euler’</p></li>
<li><p><strong>nsteps</strong> – Maximum number of steps the integrator takes</p></li>
<li><p><strong>prediction_horizon</strong> – number of future reference values included in the observation</p></li>
<li><p><strong>interlocking_time</strong> – interlocking time of the converter</p></li>
<li><p><strong>noise_levels</strong> – <p>Setting of noise levels in percentage of signal power for each variable.</p>
<p>If the noise level is integer, then the noise level is equal for each state var.</p>
<p>If noise level is of type iterable((‘state var’, float))
then each state var has different noise.</p>
<p>Variables that are not in the iterable are assigned 0 noise</p>
</p></li>
<li><p><strong>reward_fct</strong> – <p>Select the reward function between: (Each one normalised to [0,1] or [-1,0])</p>
<p>’swae’: Absolute Error between references and state variables [-1,0]</p>
<p>’swse’: Squared Error between references and state  variables [-1,0]</p>
<p>’swsae’: Shifted absolute error / 1 + swae [0,1]</p>
<p>’swsse’: Shifted squared error  / 1 + swse [0,1]</p>
</p></li>
<li><p><strong>limit_observer</strong> – <p>Select the limit observing function.</p>
<p>’off’: No limits are observed. Episode goes on.</p>
<dl class="simple">
<dt>’no_punish’: Limits are observed, no punishment term for violation.</dt><dd><p>This function should be used with shifted reward functions.</p>
</dd>
<dt>’const_punish’: Limits are observed. Punishment in the form of -1 / (1-gamma) to</dt><dd><p>punish the agent with the maximum negative reward for the further steps.
This function should be used with non shifted reward functions.</p>
</dd>
</dl>
</p></li>
<li><p><strong>dead_time</strong> – specifies if dead time of one sampling interval will be considered</p></li>
<li><p><strong>gamma</strong> – Parameter for the const_punish limit observer. If this one is not chosen gamma is unused.
Specifies the punishment height for limit violations. Should roughly equal the agents discount factor
gamma.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmEnv.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/envs/gym_pmsm/pmsm_env.html#PmsmEnv.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmEnv.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleanup for the environment.</p>
<p>When the environment is closed the dashboard will also be closed.
This function does not need to be called explicitly.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmEnv.get_motor_param">
<code class="sig-name descname">get_motor_param</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/envs/gym_pmsm/pmsm_env.html#PmsmEnv.get_motor_param"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmEnv.get_motor_param" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns all motor parameters, sampling time, safety margin and converter limits.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary containing the motor parameters as well as the sampling time tau, the safety margin and the
converter limits.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmEnv.render">
<code class="sig-name descname">render</code><span class="sig-paren">(</span><em class="sig-param">mode='human'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/envs/gym_pmsm/pmsm_env.html#PmsmEnv.render"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmEnv.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the visualization step by step.</p>
<p>Call this function once a cycle to update the visualization with the current values.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmEnv.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/envs/gym_pmsm/pmsm_env.html#PmsmEnv.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmEnv.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the environment for another episode.</p>
<p>The step counter is reset to 0.         The starting state is initialized as described in the class documentation.         New References are generated either deterministic (sinusoidal, triangular, sawtooth or step) or randomly.         The dashboard is reset.
:returns: The observation of the initial state.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmEnv.step">
<code class="sig-name descname">step</code><span class="sig-paren">(</span><em class="sig-param">action</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/envs/gym_pmsm/pmsm_env.html#PmsmEnv.step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmEnv.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Clips the action to its limits and performs one step on the motor.</p>
<p>This method performs one step by first calculating the input voltages at the terminals of the motor by the
action on the converter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>action</strong> – The action from the Action space that will be performed on the motor</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>observation:</strong>    The observation from the environment</p>
<p><strong>reward:</strong>         The reward for the taken action</p>
<p><strong>bool:</strong>           Flag if the episode has ended</p>
<p><strong>info:</strong>           An always empty dictionary</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple(array(float), float, bool, dict)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="discretely-controlled-pmsm-environment">
<h2>Discretely Controlled PMSM Environment<a class="headerlink" href="#discretely-controlled-pmsm-environment" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmDisc">
<em class="property">class </em><code class="sig-prename descclassname">gym_electric_motor.envs.gym_pmsm.pmsm_env.</code><code class="sig-name descname">PmsmDisc</code><span class="sig-paren">(</span><em class="sig-param">tau=1e-05</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/envs/gym_pmsm/pmsm_env.html#PmsmDisc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmDisc" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic setting of all the common motor parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>converter_type</strong> – Selection of discrete or continuous converter. Either ‘Disc’ or ‘Cont’</p></li>
<li><p><strong>zero_refs</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – Selection of reference variables that should get zero references
to keep their value low.</p></li>
<li><p><strong>tau</strong> – sampling time</p></li>
<li><p><strong>episode_length</strong> – The episode length of the environment</p></li>
<li><p><strong>load_parameter</strong> – A dict of Load parameters that differ from the default ones.                            For details look into the load model.</p></li>
<li><p><strong>motor_parameter</strong> – A dict of motor parameters that differ from the default ones.                             For details look into the dc_motor model.</p></li>
<li><p><strong>reward_weight</strong> – <p>Iterable of key/value pairs that specifies how the rewards in the environment
are weighted.
E.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">((</span><span class="s1">&#39;omega&#39;</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),(</span><span class="s1">&#39;u_a&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">))</span>
</pre></div>
</div>
</p></li>
<li><p><strong>on_dashboard</strong> (<em>list</em><em>(</em><em>str</em><em>) </em><em>with entries that are names of state variables</em>) – Set the dashboard variables that shall be displayed.
If on_dashboard is [‘True’] then all variables will be displayed
If on_dashboard is [‘False’] then no variables will be displayed</p></li>
<li><p><strong>integrator</strong> – Select integration method between ‘dopri5’ and ‘euler’</p></li>
<li><p><strong>nsteps</strong> – Maximum number of steps the integrator takes</p></li>
<li><p><strong>prediction_horizon</strong> – number of future reference values included in the observation</p></li>
<li><p><strong>interlocking_time</strong> – interlocking time of the converter</p></li>
<li><p><strong>noise_levels</strong> – <p>Setting of noise levels in percentage of signal power for each variable.</p>
<p>If the noise level is integer, then the noise level is equal for each state var.</p>
<p>If noise level is of type iterable((‘state var’, float))
then each state var has different noise.</p>
<p>Variables that are not in the iterable are assigned 0 noise</p>
</p></li>
<li><p><strong>reward_fct</strong> – <p>Select the reward function between: (Each one normalised to [0,1] or [-1,0])</p>
<p>’swae’: Absolute Error between references and state variables [-1,0]</p>
<p>’swse’: Squared Error between references and state  variables [-1,0]</p>
<p>’swsae’: Shifted absolute error / 1 + swae [0,1]</p>
<p>’swsse’: Shifted squared error  / 1 + swse [0,1]</p>
</p></li>
<li><p><strong>limit_observer</strong> – <p>Select the limit observing function.</p>
<p>’off’: No limits are observed. Episode goes on.</p>
<dl class="simple">
<dt>’no_punish’: Limits are observed, no punishment term for violation.</dt><dd><p>This function should be used with shifted reward functions.</p>
</dd>
<dt>’const_punish’: Limits are observed. Punishment in the form of -1 / (1-gamma) to</dt><dd><p>punish the agent with the maximum negative reward for the further steps.
This function should be used with non shifted reward functions.</p>
</dd>
</dl>
</p></li>
<li><p><strong>dead_time</strong> – specifies if dead time of one sampling interval will be considered</p></li>
<li><p><strong>gamma</strong> – Parameter for the const_punish limit observer. If this one is not chosen gamma is unused.
Specifies the punishment height for limit violations. Should roughly equal the agents discount factor
gamma.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="continuously-controlled-pmsm-environment">
<h2>Continuously Controlled PMSM Environment<a class="headerlink" href="#continuously-controlled-pmsm-environment" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmCont">
<em class="property">class </em><code class="sig-prename descclassname">gym_electric_motor.envs.gym_pmsm.pmsm_env.</code><code class="sig-name descname">PmsmCont</code><span class="sig-paren">(</span><em class="sig-param">tau=0.0001</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/envs/gym_pmsm/pmsm_env.html#PmsmCont"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmCont" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic setting of all the common motor parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>converter_type</strong> – Selection of discrete or continuous converter. Either ‘Disc’ or ‘Cont’</p></li>
<li><p><strong>zero_refs</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – Selection of reference variables that should get zero references
to keep their value low.</p></li>
<li><p><strong>tau</strong> – sampling time</p></li>
<li><p><strong>episode_length</strong> – The episode length of the environment</p></li>
<li><p><strong>load_parameter</strong> – A dict of Load parameters that differ from the default ones.                            For details look into the load model.</p></li>
<li><p><strong>motor_parameter</strong> – A dict of motor parameters that differ from the default ones.                             For details look into the dc_motor model.</p></li>
<li><p><strong>reward_weight</strong> – <p>Iterable of key/value pairs that specifies how the rewards in the environment
are weighted.
E.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">((</span><span class="s1">&#39;omega&#39;</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),(</span><span class="s1">&#39;u_a&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">))</span>
</pre></div>
</div>
</p></li>
<li><p><strong>on_dashboard</strong> (<em>list</em><em>(</em><em>str</em><em>) </em><em>with entries that are names of state variables</em>) – Set the dashboard variables that shall be displayed.
If on_dashboard is [‘True’] then all variables will be displayed
If on_dashboard is [‘False’] then no variables will be displayed</p></li>
<li><p><strong>integrator</strong> – Select integration method between ‘dopri5’ and ‘euler’</p></li>
<li><p><strong>nsteps</strong> – Maximum number of steps the integrator takes</p></li>
<li><p><strong>prediction_horizon</strong> – number of future reference values included in the observation</p></li>
<li><p><strong>interlocking_time</strong> – interlocking time of the converter</p></li>
<li><p><strong>noise_levels</strong> – <p>Setting of noise levels in percentage of signal power for each variable.</p>
<p>If the noise level is integer, then the noise level is equal for each state var.</p>
<p>If noise level is of type iterable((‘state var’, float))
then each state var has different noise.</p>
<p>Variables that are not in the iterable are assigned 0 noise</p>
</p></li>
<li><p><strong>reward_fct</strong> – <p>Select the reward function between: (Each one normalised to [0,1] or [-1,0])</p>
<p>’swae’: Absolute Error between references and state variables [-1,0]</p>
<p>’swse’: Squared Error between references and state  variables [-1,0]</p>
<p>’swsae’: Shifted absolute error / 1 + swae [0,1]</p>
<p>’swsse’: Shifted squared error  / 1 + swse [0,1]</p>
</p></li>
<li><p><strong>limit_observer</strong> – <p>Select the limit observing function.</p>
<p>’off’: No limits are observed. Episode goes on.</p>
<dl class="simple">
<dt>’no_punish’: Limits are observed, no punishment term for violation.</dt><dd><p>This function should be used with shifted reward functions.</p>
</dd>
<dt>’const_punish’: Limits are observed. Punishment in the form of -1 / (1-gamma) to</dt><dd><p>punish the agent with the maximum negative reward for the further steps.
This function should be used with non shifted reward functions.</p>
</dd>
</dl>
</p></li>
<li><p><strong>dead_time</strong> – specifies if dead time of one sampling interval will be considered</p></li>
<li><p><strong>gamma</strong> – Parameter for the const_punish limit observer. If this one is not chosen gamma is unused.
Specifies the punishment height for limit violations. Should roughly equal the agents discount factor
gamma.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmCont.step">
<code class="sig-name descname">step</code><span class="sig-paren">(</span><em class="sig-param">action</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/envs/gym_pmsm/pmsm_env.html#PmsmCont.step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.envs.gym_pmsm.pmsm_env.PmsmCont.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Clips the action to its limits and performs one step on the motor.</p>
<p>This method performs one step by first calculating the input voltages at the terminals of the motor by the
action on the converter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>action</strong> – The action from the Action space that will be performed on the motor</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>observation:</strong>    The observation from the environment</p>
<p><strong>reward:</strong>         The reward for the taken action</p>
<p><strong>bool:</strong>           Flag if the episode has ended</p>
<p><strong>info:</strong>           An always empty dictionary</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple(array(float), float, bool, dict)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Arne Traue, Gerrit Book

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>