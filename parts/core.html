

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Core &mdash; gym-electric-motor 2019 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Utils" href="utils.html" />
    <link rel="prev" title="Console Printer" href="visualizations/console_printer.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> gym-electric-motor
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Gym Electric Motor Readme:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="readme.html">Readme File</a></li>
</ul>
<p class="caption"><span class="caption-text">gym-electric-motor Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="environments/environment.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference_generators/reference_generator.html">Reference Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="reward_functions/reward_function.html">Reward Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="physical_systems/physical_system.html">Physical Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualizations/visualization.html">Visualization</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utils</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gym-electric-motor</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Core</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/parts/core.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-gym_electric_motor.core">
<span id="core"></span><h1>Core<a class="headerlink" href="#module-gym_electric_motor.core" title="Permalink to this headline">¶</a></h1>
<p>On the core level the electric motor environment and the interface to its submodules are defined. By using these
interfaces further reference generators, reward functions, visualizations or physical models can be implemented.</p>
<p>Each ElectricMotorEnvironment contains the four following modules:</p>
<ul class="simple">
<li><dl class="simple">
<dt>PhysicalSystem</dt><dd><ul>
<li><p>Specification and simulation of the physical model. Furthermore, specifies limits and nominal values    for all of its <code class="docutils literal notranslate"><span class="pre">state_variables</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ReferenceGenerator</dt><dd><ul>
<li><p>Calculation of reference trajectories for one or more states of the physical systems <code class="docutils literal notranslate"><span class="pre">state_variables</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>RewardFunction</dt><dd><ul>
<li><p>Calculation of the reward based on the physical systems state and the reference.     Furthermore, observation of the physical systems limits.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ElectricMotorVisualization</dt><dd><ul>
<li><p>Visualization of the PhysicalSystems state, reference and reward for the user.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<dl class="class">
<dt id="gym_electric_motor.core.ElectricMotorEnvironment">
<em class="property">class </em><code class="sig-prename descclassname">gym_electric_motor.core.</code><code class="sig-name descname">ElectricMotorEnvironment</code><span class="sig-paren">(</span><em class="sig-param">physical_system</em>, <em class="sig-param">reference_generator</em>, <em class="sig-param">reward_function</em>, <em class="sig-param">visualization=None</em>, <em class="sig-param">state_filter=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ElectricMotorEnvironment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorEnvironment" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>The main class connecting all modules of the gym-electric-motor environments.</p>
</dd>
</dl>
<p>Modules:</p>
<blockquote>
<div><dl class="simple">
<dt>Physical System:</dt><dd><p>Containing the physical structure and simulation of the drive system as well as information about the
technical limits and nominal values. Needs to be a subclass of <em>PhysicalSystem</em></p>
</dd>
<dt>Reference Generator:</dt><dd><p>Generation of the reference for the motor to follow. Needs to be a subclass of <em>ReferenceGenerator</em></p>
</dd>
<dt>Reward Function:</dt><dd><p>Calculation of the reward based on the state of the physical system and the generated reference
and observation if the motor state is within the limits. Needs to be a subclass of <em>RewardFunction</em>.</p>
</dd>
<dt>Visualization:</dt><dd><p>Visualization of the motors states. Needs to be a subclass of <em>ElectricMotorVisualization</em></p>
</dd>
<dt>Limits:</dt><dd><p>Returns a list of limits of all states in the observation (called in state_filter) in the same order.</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>State Variables:</dt><dd><p>Each environment has got a list of state variables that are defined by the physical system.
These define the names and order for all further state arrays in the modules. These states are announced to the
other modules by announcing the physical system to them, which contains the property <code class="docutils literal notranslate"><span class="pre">state_names</span></code>.</p>
<dl class="simple">
<dt>Example:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">['omega',</span> <span class="pre">'torque','i',</span> <span class="pre">'u',</span> <span class="pre">'u_sup']</span></code></p>
</dd>
</dl>
</dd>
<dt>Observation:</dt><dd><dl class="simple">
<dt>Type: Tuple(State_Space, Reference_Space)</dt><dd><p>The observation is always a tuple of the State Space of the Physical System and the Reference Space of the
Reference Generator. In all current Physical Systems and Reference Generators these Spaces are normalized,
continuous, multidimensional boxes in [-1, 1] or [0, 1].</p>
</dd>
</dl>
</dd>
<dt>Actions:</dt><dd><dl class="simple">
<dt>Type: Discrete() / Box()</dt><dd><p>The action space of the environments are the action spaces of the physical systems. In all current physical
systems the action spaces are specified by its PowerElectronicConverter and either a continuous,
multidimensional box or discrete.</p>
</dd>
</dl>
</dd>
<dt>Reward:</dt><dd><p>The reward and the reward range are specified by the RewardFunction. In general the reward is higher the closer
the motor state follows the reference trajectories.</p>
</dd>
<dt>Starting State:</dt><dd><p>The physical system and the reference generator define the starting state.</p>
</dd>
<dt>Episode Termination:</dt><dd><p>Episode terminations can be initiated by the reference generator, or the reward function.
A reference generator might terminate an episode, if the reference has ended.
The reward function can terminate an episode, if a physical limit of the motor has been violated.</p>
</dd>
</dl>
<p>Setting and initialization of all environments’ modules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>physical_system</strong> (<a class="reference internal" href="physical_systems/physical_system.html#gym_electric_motor.core.PhysicalSystem" title="gym_electric_motor.core.PhysicalSystem"><em>PhysicalSystem</em></a>) – The physical system of this environment.</p></li>
<li><p><strong>reference_generator</strong> (<a class="reference internal" href="reference_generators/reference_generator.html#gym_electric_motor.core.ReferenceGenerator" title="gym_electric_motor.core.ReferenceGenerator"><em>ReferenceGenerator</em></a>) – The reference generator of this environment.</p></li>
<li><p><strong>reward_function</strong> (<a class="reference internal" href="reward_functions/reward_function.html#gym_electric_motor.core.RewardFunction" title="gym_electric_motor.core.RewardFunction"><em>RewardFunction</em></a>) – The reward function of this environment.</p></li>
<li><p><strong>visualization</strong> (<a class="reference internal" href="visualizations/visualization.html#gym_electric_motor.core.ElectricMotorVisualization" title="gym_electric_motor.core.ElectricMotorVisualization"><em>ElectricMotorVisualization</em></a>) – The visualization of this environment.</p></li>
<li><p><strong>state_filter</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – Selection of states that are shown in the observation.</p></li>
<li><p><strong>**kwargs</strong> – Arguments to be passed to the modules.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorEnvironment.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ElectricMotorEnvironment.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorEnvironment.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the environment is deleted. Closes all its modules.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorEnvironment.limits">
<em class="property">property </em><code class="sig-name descname">limits</code><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorEnvironment.limits" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of limits of all states in the observation (called in state_filter) in the same order</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorEnvironment.nominal_state">
<em class="property">property </em><code class="sig-name descname">nominal_state</code><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorEnvironment.nominal_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of nominal values of all states in the observation (called in state_filter) in the same order</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorEnvironment.physical_system">
<em class="property">property </em><code class="sig-name descname">physical_system</code><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorEnvironment.physical_system" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
PhysicalSystem: The Physical System of the Environment</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorEnvironment.reference_generator">
<em class="property">property </em><code class="sig-name descname">reference_generator</code><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorEnvironment.reference_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
ReferenceGenerator: The ReferenceGenerator of the Environment</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorEnvironment.render">
<code class="sig-name descname">render</code><span class="sig-paren">(</span><em class="sig-param">*_</em>, <em class="sig-param">**__</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ElectricMotorEnvironment.render"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorEnvironment.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the visualization of the motor.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorEnvironment.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param">*_</em>, <em class="sig-param">**__</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ElectricMotorEnvironment.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorEnvironment.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset of the environment and all its modules to an initial state.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The initial observation consisting of the initial state and initial reference.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorEnvironment.reward_function">
<em class="property">property </em><code class="sig-name descname">reward_function</code><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorEnvironment.reward_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
RewardFunction: The RewardFunction of the environment</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorEnvironment.state_names">
<em class="property">property </em><code class="sig-name descname">state_names</code><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorEnvironment.state_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of state names of all states in the observation (called in state_filter) in the same order</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorEnvironment.step">
<code class="sig-name descname">step</code><span class="sig-paren">(</span><em class="sig-param">action</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ElectricMotorEnvironment.step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorEnvironment.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform one simulation step of the environment with an action of the action space.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>action</strong> – Action to play on the environment.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Tuple of the new state and the next reference.
reward(float): Amount of reward received for the last step.
done(bool): Flag, indicating if a reset is required before new steps can be taken.
{}: An empty dictionary for consistency with the OpenAi Gym interface.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>observation(Tuple(ndarray(float),ndarray(float))</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gym_electric_motor.core.ElectricMotorVisualization">
<em class="property">class </em><code class="sig-prename descclassname">gym_electric_motor.core.</code><code class="sig-name descname">ElectricMotorVisualization</code><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ElectricMotorVisualization"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorVisualization" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all visualizations in the gym-electric-motor toolbox and an empty dummy visualization, if no
visualization is required.</p>
<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorVisualization.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><em class="sig-param">*_</em>, <em class="sig-param">**__</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ElectricMotorVisualization.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorVisualization.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the environment is deleted to close or save figures, logs etc.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorVisualization.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param">reference_trajectories=None</em>, <em class="sig-param">*_</em>, <em class="sig-param">**__</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ElectricMotorVisualization.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorVisualization.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the environment is reset to clear or save plots etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reference_trajectories</strong> (<em>dict</em><em>(</em><em>list/ndarray</em><em>(</em><em>float</em><em>)</em><em>)</em>) – If references are known in advance by the reference</p></li>
<li><p><strong>they are passed here to the visualization as a dictionary of the state_name to a</strong> (<em>generator</em><em>,</em>) – </p></li>
<li><p><strong>of future reference points.</strong> (<em>list</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorVisualization.set_modules">
<code class="sig-name descname">set_modules</code><span class="sig-paren">(</span><em class="sig-param">physical_system</em>, <em class="sig-param">reference_generator</em>, <em class="sig-param">reward_function</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ElectricMotorVisualization.set_modules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorVisualization.set_modules" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>physical_system</strong> (<a class="reference internal" href="physical_systems/physical_system.html#gym_electric_motor.core.PhysicalSystem" title="gym_electric_motor.core.PhysicalSystem"><em>PhysicalSystem</em></a>) – This function is called from the environment in its initialization.
Settings that require the knowledge of the physical system (like setting of state variables) have to be
done in this function.</p></li>
<li><p><strong>reference_generator</strong> (<a class="reference internal" href="reference_generators/reference_generator.html#gym_electric_motor.core.ReferenceGenerator" title="gym_electric_motor.core.ReferenceGenerator"><em>ReferenceGenerator</em></a>) – This function is called from the environment in its initialization.
Settings that require the knowledge of the reference generator (like setting of referenced variables)
have to be done in this function.</p></li>
<li><p><strong>reward_function</strong> (<a class="reference internal" href="reward_functions/reward_function.html#gym_electric_motor.core.RewardFunction" title="gym_electric_motor.core.RewardFunction"><em>RewardFunction</em></a>) – This function is called from the environment in its initialization.
Settings that require the knowledge of the reward function (like setting of reward ranges) have
to be done in this function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ElectricMotorVisualization.step">
<code class="sig-name descname">step</code><span class="sig-paren">(</span><em class="sig-param">state</em>, <em class="sig-param">reference</em>, <em class="sig-param">reward</em>, <em class="sig-param">*_</em>, <em class="sig-param">**__</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ElectricMotorVisualization.step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ElectricMotorVisualization.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by the environment every cycle and passes the current, normalized state array,
the normalized references in the same shape as the state array and the received reward.
For non-referenced states the value in the reference array can be ignored.</p>
<p class="rubric">Example</p>
<p><code class="docutils literal notranslate"><span class="pre">`state_variables</span> <span class="pre">=</span> <span class="pre">['omega',</span> <span class="pre">'torque',</span> <span class="pre">'i',</span> <span class="pre">'u',</span> <span class="pre">'u_sup']`</span></code>
<code class="docutils literal notranslate"><span class="pre">`state</span> <span class="pre">=</span> <span class="pre">[0.65,</span> <span class="pre">0.32,</span> <span class="pre">0.2,</span> <span class="pre">1.0,</span> <span class="pre">1.0]`</span></code>
<code class="docutils literal notranslate"><span class="pre">`reference</span> <span class="pre">=</span> <span class="pre">[0.7,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0]`</span></code>
Only the first reference value is important here, because all others are not referenced.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> (<em>ndarray</em><em>(</em><em>float</em><em>)</em>) – The state of the physical system.</p></li>
<li><p><strong>reference</strong> (<em>ndarray</em><em>(</em><em>float</em><em>)</em>) – The reference array of the reference generator.</p></li>
<li><p><strong>reward</strong> (<em>float</em>) – The reward from the reward function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gym_electric_motor.core.PhysicalSystem">
<em class="property">class </em><code class="sig-prename descclassname">gym_electric_motor.core.</code><code class="sig-name descname">PhysicalSystem</code><span class="sig-paren">(</span><em class="sig-param">action_space</em>, <em class="sig-param">state_space</em>, <em class="sig-param">state_names</em>, <em class="sig-param">tau</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#PhysicalSystem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.PhysicalSystem" title="Permalink to this definition">¶</a></dt>
<dd><p>The Physical System module encapsulates the physical model of the system as well as the simulation from one step to
the next.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>action_space</strong> (<em>gym.Space</em>) – The set of allowed actions on the system.</p></li>
<li><p><strong>state_space</strong> (<em>gym.Space</em>) – The set of possible systems states.</p></li>
<li><p><strong>state_names</strong> (<em>ndarray</em><em>(</em><em>str</em><em>)</em>) – The names of the systems states</p></li>
<li><p><strong>tau</strong> (<em>float</em>) – The systems simulation time interval.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="gym_electric_motor.core.PhysicalSystem.action_space">
<em class="property">property </em><code class="sig-name descname">action_space</code><a class="headerlink" href="#gym_electric_motor.core.PhysicalSystem.action_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
gym.Space: An OpenAI Gym Space that describes the possible actions on the system.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.PhysicalSystem.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#PhysicalSystem.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.PhysicalSystem.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Called, when the environment is closed.
Close the System and all of its submodules by closing files, saving logs etc.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.PhysicalSystem.k">
<em class="property">property </em><code class="sig-name descname">k</code><a class="headerlink" href="#gym_electric_motor.core.PhysicalSystem.k" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
int: The current systems time step k.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.PhysicalSystem.limits">
<em class="property">property </em><code class="sig-name descname">limits</code><a class="headerlink" href="#gym_electric_motor.core.PhysicalSystem.limits" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
ndarray(float): An array containing the maximum allowed physical values for each state variable.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.PhysicalSystem.nominal_state">
<em class="property">property </em><code class="sig-name descname">nominal_state</code><a class="headerlink" href="#gym_electric_motor.core.PhysicalSystem.nominal_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
ndarray(float): An array containing the nominal values for each state variable.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.PhysicalSystem.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param">initial_state=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#PhysicalSystem.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.PhysicalSystem.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the physical system to an initial state before a new episode starts.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The initial systems state</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>element of state_space</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.PhysicalSystem.simulate">
<code class="sig-name descname">simulate</code><span class="sig-paren">(</span><em class="sig-param">action</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#PhysicalSystem.simulate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.PhysicalSystem.simulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulation of the Physical System for one time step with the input action.
This method is called in the environment in every step to update the systems state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>action</strong> (<em>element of action_space</em>) – The action to play on the system for the next time step.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The systems state after the action was applied.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>element of state_space</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.PhysicalSystem.state_names">
<em class="property">property </em><code class="sig-name descname">state_names</code><a class="headerlink" href="#gym_electric_motor.core.PhysicalSystem.state_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
ndarray(str): Array containing the names of the systems states.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.PhysicalSystem.state_positions">
<em class="property">property </em><code class="sig-name descname">state_positions</code><a class="headerlink" href="#gym_electric_motor.core.PhysicalSystem.state_positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
dict(int): Dictionary mapping the state names to its positions in the state arrays</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.PhysicalSystem.state_space">
<em class="property">property </em><code class="sig-name descname">state_space</code><a class="headerlink" href="#gym_electric_motor.core.PhysicalSystem.state_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
gym.Space: An OpenAI Gym Space that describes the possible states of the system.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.PhysicalSystem.tau">
<em class="property">property </em><code class="sig-name descname">tau</code><a class="headerlink" href="#gym_electric_motor.core.PhysicalSystem.tau" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
float: The systems time constant tau.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gym_electric_motor.core.ReferenceGenerator">
<em class="property">class </em><code class="sig-prename descclassname">gym_electric_motor.core.</code><code class="sig-name descname">ReferenceGenerator</code><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ReferenceGenerator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ReferenceGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>The abstract base class for reference generators in the gym electric motor environments.</p>
<dl class="simple">
<dt>reference_space:</dt><dd><p>Space from the OpenAI Gym Toolbox to define the space of the reference observations.</p>
</dd>
</dl>
<p>The reference generator is called twice per step.</p>
<dl>
<dt>Call of get_reference():</dt><dd><p>Once, to get the reference array. The reference array has got the same shape as the state array and contains
the current reference values for referenced state variables and a default value (e.g zero) at all other entries.
This reference array is used to calculate the rewards.</p>
<dl>
<dt>Example:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">reference_array=np.array([0.8,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0])</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">state_variables=['omega',</span> <span class="pre">'torque',</span> <span class="pre">'i',</span> <span class="pre">'u',</span> <span class="pre">'u_sup']</span></code></p>
<p>This would be the corresponding reference array for an environment with the upper state array with an omega
reference.</p>
</dd>
</dl>
</dd>
<dt>Call of get_reference_observation():</dt><dd><p>Another time to get the reference observation. The reference observation needs to be in the defined reference
space. For example, it can contain future reference values of the next n steps (of the referenced states only).
It can have in general any shape and content. The returned object of this method is the reference that is
shown to the agent.</p>
<dl>
<dt>Example:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">reference_observation</span> <span class="pre">=</span> <span class="pre">np.array([0.8,</span> <span class="pre">0.6,</span> <span class="pre">0.4])</span></code></p>
<p>This array could model a reference observation for an omega controlled environment that shows the agent not
only the reference for the next time step t+1 but also t+3 and t+3.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="gym_electric_motor.core.ReferenceGenerator.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ReferenceGenerator.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ReferenceGenerator.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by the environment, when the environment is deleted to close files, store logs…</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ReferenceGenerator.get_reference">
<code class="sig-name descname">get_reference</code><span class="sig-paren">(</span><em class="sig-param">state</em>, <em class="sig-param">*_</em>, <em class="sig-param">**__</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ReferenceGenerator.get_reference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ReferenceGenerator.get_reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the reference array of the current time step.</p>
<p>The reference array needs to be in the same shape as the state variables. For referenced states the reference
value is passed. For unreferenced states a default value (e.g. Zero) can be set in the reference array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> (<em>ndarray</em><em>(</em><em>float</em><em>)</em>) – Current state array of the environment.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Current reference array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(float))</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ReferenceGenerator.get_reference_observation">
<code class="sig-name descname">get_reference_observation</code><span class="sig-paren">(</span><em class="sig-param">state</em>, <em class="sig-param">*_</em>, <em class="sig-param">**__</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ReferenceGenerator.get_reference_observation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ReferenceGenerator.get_reference_observation" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the reference observation for the next time step. This observation needs to fit in the reference space.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> (<em>ndarray</em><em>(</em><em>float</em><em>)</em>) – Current state array of the environment.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Observation for the next reference time step.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>value in reference_space</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gym_electric_motor.core.ReferenceGenerator.reference_space">
<code class="sig-name descname">reference_space</code><em class="property"> = None</em><a class="headerlink" href="#gym_electric_motor.core.ReferenceGenerator.reference_space" title="Permalink to this definition">¶</a></dt>
<dd><p>The gym.space the references are in.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ReferenceGenerator.referenced_states">
<em class="property">property </em><code class="sig-name descname">referenced_states</code><a class="headerlink" href="#gym_electric_motor.core.ReferenceGenerator.referenced_states" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns:
ndarray(bool): Boolean-Array with the length of the state_variables indicating which states are referenced.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ReferenceGenerator.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param">initial_state=None</em>, <em class="sig-param">initial_reference=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ReferenceGenerator.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ReferenceGenerator.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset of references for a new episode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initial_state</strong> (<em>ndarray</em><em>(</em><em>float</em><em>)</em>) – The initial state array of the environment.</p></li>
<li><p><strong>initial_reference</strong> (<em>ndarray</em><em>(</em><em>float</em><em>)</em>) – If not None: A desired initial reference array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>The current reference array of time step 0.</p>
<p>reference_observation(value in reference_space): The reference observation for the next time step. </p>
<p>trajectories(dict(list(float)): If available,                 generated trajectories for the Visualization can be passed here. Otherwise return None.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>reference_array(ndarray(float))</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.ReferenceGenerator.set_modules">
<code class="sig-name descname">set_modules</code><span class="sig-paren">(</span><em class="sig-param">physical_system</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#ReferenceGenerator.set_modules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.ReferenceGenerator.set_modules" title="Permalink to this definition">¶</a></dt>
<dd><p>Announcement of the PhysicalSystem to the ReferenceGenerator.</p>
<p>In subclasses, store all important information from the physical system to the ReferenceGenerator here.
The environment announces the physical system to the ReferenceGenerator during its initialization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>physical_system</strong> (<a class="reference internal" href="physical_systems/physical_system.html#gym_electric_motor.core.PhysicalSystem" title="gym_electric_motor.core.PhysicalSystem"><em>PhysicalSystem</em></a>) – The physical system of the environment.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gym_electric_motor.core.RewardFunction">
<em class="property">class </em><code class="sig-prename descclassname">gym_electric_motor.core.</code><code class="sig-name descname">RewardFunction</code><span class="sig-paren">(</span><em class="sig-param">observed_states='currents'</em>, <em class="sig-param">**__</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#RewardFunction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.RewardFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>The abstract base class for reward functions in the gym electric motor environments.</p>
<p>The reward function is called once per step and returns reward for the current time step.
Furthermore, the reward function includes the limit observer. If limits have been violated and the episode ended
a different reward for violating the limits is returned.</p>
<dl class="simple">
<dt>reward_range:</dt><dd><p>Tuple(float, float): Defining lowest and highest possible rewards for non limit-violating steps.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>observed_states</strong> (<em>str/iterable</em><em>(</em><em>str</em><em>)</em>) – Names of the observed states. ‘all’ for the observation of every state.
‘currents’ for all currents and ‘voltages’ for all voltages. Combinations of ‘currents’ and
‘voltages’ with other states are possible. Choose None for not observing states.</p>
</dd>
</dl>
<dl class="method">
<dt id="gym_electric_motor.core.RewardFunction.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#RewardFunction.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.RewardFunction.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Called, when the environment is closed to store logs, close files etc.</p>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.RewardFunction.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param">initial_state=None</em>, <em class="sig-param">initial_reference=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#RewardFunction.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.RewardFunction.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called by the environment when reset.
Inner states of the reward function can be reset here, if necessary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initial_state</strong> (<em>ndarray</em><em>(</em><em>float</em><em>)</em>) – Initial state array of the Environment</p></li>
<li><p><strong>initial_reference</strong> (<em>ndarray</em><em>(</em><em>float</em><em>)</em>) – Initial reference array of the environment.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.RewardFunction.reward">
<code class="sig-name descname">reward</code><span class="sig-paren">(</span><em class="sig-param">state</em>, <em class="sig-param">reference</em>, <em class="sig-param">action=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#RewardFunction.reward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.RewardFunction.reward" title="Permalink to this definition">¶</a></dt>
<dd><p>Reward calculation. If limits have been violated the limit violation reward will be returned. Otherwise,
the standard reward will be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> (<em>ndarray</em><em>(</em><em>float</em><em>)</em>) – Environments state array.</p></li>
<li><p><strong>reference</strong> (<em>ndarray</em><em>(</em><em>float</em><em>)</em>) – Environments reference array.</p></li>
<li><p><strong>action</strong> (<em>element of action space</em>) – The previously taken action.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Reward for this state, reference pair.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gym_electric_motor.core.RewardFunction.reward_range">
<code class="sig-name descname">reward_range</code><em class="property"> = (-inf, inf)</em><a class="headerlink" href="#gym_electric_motor.core.RewardFunction.reward_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Lower and upper possible reward (excluding limit violation reward)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Tuple(int,int)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="gym_electric_motor.core.RewardFunction.set_modules">
<code class="sig-name descname">set_modules</code><span class="sig-paren">(</span><em class="sig-param">physical_system</em>, <em class="sig-param">reference_generator</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/gym_electric_motor/core.html#RewardFunction.set_modules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gym_electric_motor.core.RewardFunction.set_modules" title="Permalink to this definition">¶</a></dt>
<dd><p>Setting of the physical system, to set state arrays fitting to the environments states</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>physical_system</strong> (<a class="reference internal" href="physical_systems/physical_system.html#gym_electric_motor.core.PhysicalSystem" title="gym_electric_motor.core.PhysicalSystem"><em>PhysicalSystem</em></a>) – The physical system of the environment</p></li>
<li><p><strong>reference_generator</strong> (<a class="reference internal" href="reference_generators/reference_generator.html#gym_electric_motor.core.ReferenceGenerator" title="gym_electric_motor.core.ReferenceGenerator"><em>ReferenceGenerator</em></a>) – The reference generator of the environment.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="utils.html" class="btn btn-neutral float-right" title="Utils" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="visualizations/console_printer.html" class="btn btn-neutral float-left" title="Console Printer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Arne Traue, Gerrit Book

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>